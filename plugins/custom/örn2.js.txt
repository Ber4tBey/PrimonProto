const {addCommand, addDesc} = require('../../list'); // komutumuzu ve açıklamasını ekleyeceğimiz list.js dosyasını import ediyoruz.
addCommand(['test']); //komutumuzu ekliyoruz.
const config = require('../../config'); //config dosyasından gerekli değişkenkleri almak için. SUDOUSER, WORKTYPE
module.exports = { 
    handleCommand: async (sock, msg) => {
        for (prf of pattern) { // pattern değişkeninin içerisinde dolaş.
            if (intext.startsWith(`${prf}test`)) { //intext eğer .test ise çalışması için.

            // komutun çalışıp çalışmayacağını belirlemek için doğrulama işlemleri. 

                let wk = config.WORKTYPE === 'public' ? true : false; // WORKTYPE değişkeni public ise herkes kullanabilir, istemiyorsanız ikisinide false yaparak geçebilirsiniz.
                let usId = ''; // mesajın geldiği numara olarak dolduralacak.
                let onay = false; // onay kısmını aşşağıda düzenleyecek.
                const chId = msg.key.remoteJid; // mesajın yazıldığı chat'in Id'sini alır.
                const from = msg.key.fromMe; // Mesajı botun kendi numarasından yazılıp yazılmadığını kontrol etmek için.
                if (from) {
                    usId = sock.user.id.split(':')[0]+'@s.whatsapp.net';
                }
                else if (chId.includes('@g.us')) {
                    usId = msg.key.participant;
                }
                else {
                    usId = msg.key.remoteJid;
                }
                for (var i of config.SUDOUSER) {
                    if (usId === i) onay = true; // yazan kişi SUDOUSER kullanıcılarda bulunuyorsa onaylar.
                }
                if (!from && !onay && !wk)return; // from kısmı botun kendi numarasından gelip gelmediğini kontrol eder bot = true else = false, onay sudo olup olmadığını kontrol eder. wk ise private veya public olduğunu kontrol eder.
                
                await sock.sendMessage(msg.key.remoteJid, { // burada video, audio, text gibi argümanlar kullanarak mesaj gönderebilirsiniz. });
            }
        }
    }

}